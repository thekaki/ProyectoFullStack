/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2025 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

async function login(){var e=document.getElementById("txtEmail").value.trim(),o=document.getElementById("txtPassword").value.trim();if(e&&o){o={email:e,password:o};try{const s=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});if(!s.ok)return alert("Usuario o contraseña incorrectos ❌"),document.getElementById("txtEmail").value="",void(document.getElementById("txtPassword").value="");var t,n,a=await s.json();"function"==typeof saveTokenFromResponse?saveTokenFromResponse(a):(t=a.type||"Bearer",(n=a.token||a.accessToken||a.access_token||"")&&localStorage.setItem("token",`${t} ${n}`)),window.location.href="index.html"}catch(e){alert("Error de conexión con el servidor ❌"),console.error(e)}}else alert("Todos los campos son obligatorios ❌")}